<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Results from regression | Assessing interation in epidemiological studies</title>
  <meta name="description" content="Interactions and effect modifications." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Results from regression | Assessing interation in epidemiological studies" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Interactions and effect modifications." />
  <meta name="github-repo" content="ehsanx/interaction" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Results from regression | Assessing interation in epidemiological studies" />
  
  <meta name="twitter:description" content="Interactions and effect modifications." />
  

<meta name="author" content="Ehsan Karim, ehsan.karim@ubc.ca, https://ehsank.com/" />


<meta name="date" content="2023-02-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-stratified-data.html"/>
<link rel="next" href="reference.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Assessing interation in epidemiological studies</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Effect modification vs interaction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#effect-modification"><i class="fa fa-check"></i><b>1.1</b> Effect modification</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#interaction"><i class="fa fa-check"></i><b>1.2</b> Interaction</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="dag.html"><a href="dag.html"><i class="fa fa-check"></i><b>2</b> DAG</a></li>
<li class="chapter" data-level="3" data-path="example-data.html"><a href="example-data.html"><i class="fa fa-check"></i><b>3</b> Example data</a></li>
<li class="chapter" data-level="4" data-path="assessing-interaction-and-modelling.html"><a href="assessing-interaction-and-modelling.html"><i class="fa fa-check"></i><b>4</b> Assessing interaction and modelling</a></li>
<li class="chapter" data-level="5" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html"><i class="fa fa-check"></i><b>5</b> Modelling interaction to obtain OR</a>
<ul>
<li class="chapter" data-level="5.1" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#base"><i class="fa fa-check"></i><b>5.1</b> Base</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#no-alcohol-no-smoking-for-orsmk1-on-outcome-alc10-and-oralc1-on-outcome-smk10"><i class="fa fa-check"></i><b>5.1.1</b> no alcohol, no smoking for OR(smk1 on outcome [alc1==0] and OR(alc1 on outcome [smk1==0]</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#estimates-of-different-ors"><i class="fa fa-check"></i><b>5.2</b> Estimates of different ORs</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#alcohol"><i class="fa fa-check"></i><b>5.2.1</b> Alcohol</a></li>
<li class="chapter" data-level="5.2.2" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#smoking"><i class="fa fa-check"></i><b>5.2.2</b> Smoking</a></li>
<li class="chapter" data-level="5.2.3" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#both-alcohol-and-smoking"><i class="fa fa-check"></i><b>5.2.3</b> Both alcohol and smoking</a></li>
<li class="chapter" data-level="5.2.4" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#joint-effect"><i class="fa fa-check"></i><b>5.2.4</b> Joint effect?</a></li>
<li class="chapter" data-level="5.2.5" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#additive-scales"><i class="fa fa-check"></i><b>5.2.5</b> Additive scales</a></li>
<li class="chapter" data-level="5.2.6" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#recoding-to-obtain-different-combinations"><i class="fa fa-check"></i><b>5.2.6</b> Recoding to obtain different combinations</a></li>
<li class="chapter" data-level="5.2.7" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#multiplicative-scale"><i class="fa fa-check"></i><b>5.2.7</b> Multiplicative scale</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#reporting-guideline"><i class="fa fa-check"></i><b>5.3</b> Reporting guideline</a></li>
<li class="chapter" data-level="5.4" data-path="modelling-interaction-to-obtain-or.html"><a href="modelling-interaction-to-obtain-or.html#interaction-definitions-for-or"><i class="fa fa-check"></i><b>5.4</b> Interaction definitions for OR</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html"><i class="fa fa-check"></i><b>6</b> Modelling interaction to obtain RR</a>
<ul>
<li class="chapter" data-level="6.1" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#estimates-of-different-rrs"><i class="fa fa-check"></i><b>6.1</b> Estimates of different RRs</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#alcohol-1"><i class="fa fa-check"></i><b>6.1.1</b> Alcohol</a></li>
<li class="chapter" data-level="6.1.2" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#smoking-1"><i class="fa fa-check"></i><b>6.1.2</b> Smoking</a></li>
<li class="chapter" data-level="6.1.3" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#both-alcohol-and-smoking-1"><i class="fa fa-check"></i><b>6.1.3</b> Both alcohol and smoking</a></li>
<li class="chapter" data-level="6.1.4" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#joint-effect-1"><i class="fa fa-check"></i><b>6.1.4</b> Joint effect?</a></li>
<li class="chapter" data-level="6.1.5" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#multiplicative-scale-1"><i class="fa fa-check"></i><b>6.1.5</b> Multiplicative scale</a></li>
<li class="chapter" data-level="6.1.6" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#additive-scales-1"><i class="fa fa-check"></i><b>6.1.6</b> Additive scales</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#reporting-guideline-1"><i class="fa fa-check"></i><b>6.2</b> Reporting guideline</a></li>
<li class="chapter" data-level="6.3" data-path="modelling-interaction-to-obtain-rr.html"><a href="modelling-interaction-to-obtain-rr.html#interaction-definitions-for-rr"><i class="fa fa-check"></i><b>6.3</b> Interaction definitions for RR</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html"><i class="fa fa-check"></i><b>7</b> Modelling interaction to obtain RD</a>
<ul>
<li class="chapter" data-level="7.1" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#base-smoker-no-alcohol-for-rdalc1-on-outcome-smk11"><i class="fa fa-check"></i><b>7.1</b> Base: Smoker, no alcohol for RD(alc1 on outcome [smk1==1]</a></li>
<li class="chapter" data-level="7.2" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#estimates-of-different-rds"><i class="fa fa-check"></i><b>7.2</b> Estimates of different RDs</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#alcohol-2"><i class="fa fa-check"></i><b>7.2.1</b> Alcohol</a></li>
<li class="chapter" data-level="7.2.2" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#smoking-2"><i class="fa fa-check"></i><b>7.2.2</b> Smoking</a></li>
<li class="chapter" data-level="7.2.3" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#both-alcohol-and-smoking-2"><i class="fa fa-check"></i><b>7.2.3</b> Both alcohol and smoking</a></li>
<li class="chapter" data-level="7.2.4" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#joint-effect-2"><i class="fa fa-check"></i><b>7.2.4</b> Joint effect?</a></li>
<li class="chapter" data-level="7.2.5" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#additive-scale-interaction-contrast"><i class="fa fa-check"></i><b>7.2.5</b> Additive scale (interaction contrast)</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="modelling-interaction-to-obtain-rd.html"><a href="modelling-interaction-to-obtain-rd.html#interaction-definitions-for-rd"><i class="fa fa-check"></i><b>7.3</b> Interaction definitions for RD</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reporting-guideline-for-interaction-assessment.html"><a href="reporting-guideline-for-interaction-assessment.html"><i class="fa fa-check"></i><b>8</b> Reporting guideline for interaction assessment</a></li>
<li class="chapter" data-level="9" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i><b>9</b> Bibliography</a></li>
<li class="chapter" data-level="10" data-path="effect-modification-1.html"><a href="effect-modification-1.html"><i class="fa fa-check"></i><b>10</b> Effect modification</a>
<ul>
<li class="chapter" data-level="10.1" data-path="effect-modification-1.html"><a href="effect-modification-1.html#definitions"><i class="fa fa-check"></i><b>10.1</b> Definitions</a></li>
<li class="chapter" data-level="10.2" data-path="effect-modification-1.html"><a href="effect-modification-1.html#controvercy-about-logistic-regressions"><i class="fa fa-check"></i><b>10.2</b> Controvercy about logistic regressions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="prepare-data.html"><a href="prepare-data.html"><i class="fa fa-check"></i><b>11</b> Prepare data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="prepare-data.html"><a href="prepare-data.html#load-data"><i class="fa fa-check"></i><b>11.1</b> Load data</a></li>
<li class="chapter" data-level="11.2" data-path="prepare-data.html"><a href="prepare-data.html#identify-variables"><i class="fa fa-check"></i><b>11.2</b> Identify variables</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="working-with-2x2-tables.html"><a href="working-with-2x2-tables.html"><i class="fa fa-check"></i><b>12</b> Working with 2x2 tables</a>
<ul>
<li class="chapter" data-level="12.1" data-path="working-with-2x2-tables.html"><a href="working-with-2x2-tables.html#get-crude-risk-ratio"><i class="fa fa-check"></i><b>12.1</b> Get crude risk ratio</a></li>
<li class="chapter" data-level="12.2" data-path="working-with-2x2-tables.html"><a href="working-with-2x2-tables.html#change-exposure-label-if-rr-1"><i class="fa fa-check"></i><b>12.2</b> Change exposure label if RR &lt;1</a></li>
<li class="chapter" data-level="12.3" data-path="working-with-2x2-tables.html"><a href="working-with-2x2-tables.html#get-detailed-estimates-from-2x2-table"><i class="fa fa-check"></i><b>12.3</b> Get detailed estimates from 2x2 table</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="working-with-stratified-data.html"><a href="working-with-stratified-data.html"><i class="fa fa-check"></i><b>13</b> Working with stratified data</a>
<ul>
<li class="chapter" data-level="13.1" data-path="working-with-stratified-data.html"><a href="working-with-stratified-data.html#first-strata"><i class="fa fa-check"></i><b>13.1</b> First strata</a></li>
<li class="chapter" data-level="13.2" data-path="working-with-stratified-data.html"><a href="working-with-stratified-data.html#second-strata"><i class="fa fa-check"></i><b>13.2</b> second strata</a></li>
<li class="chapter" data-level="13.3" data-path="working-with-stratified-data.html"><a href="working-with-stratified-data.html#does-effect-modification-exist"><i class="fa fa-check"></i><b>13.3</b> Does effect modification exist?</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="results-from-regression.html"><a href="results-from-regression.html"><i class="fa fa-check"></i><b>14</b> Results from regression</a>
<ul>
<li class="chapter" data-level="14.1" data-path="results-from-regression.html"><a href="results-from-regression.html#or-multiplicative-scale"><i class="fa fa-check"></i><b>14.1</b> OR: multiplicative scale</a></li>
<li class="chapter" data-level="14.2" data-path="results-from-regression.html"><a href="results-from-regression.html#rd-additive-scale"><i class="fa fa-check"></i><b>14.2</b> RD: additive scale</a></li>
<li class="chapter" data-level="14.3" data-path="results-from-regression.html"><a href="results-from-regression.html#rr-multiplicative-scale"><i class="fa fa-check"></i><b>14.3</b> RR: multiplicative scale</a></li>
<li class="chapter" data-level="14.4" data-path="results-from-regression.html"><a href="results-from-regression.html#converted-estimates-from-or"><i class="fa fa-check"></i><b>14.4</b> Converted estimates from OR</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>15</b> Reference</a></li>
<li class="divider"></li>
<li><a href="https://github.com/ehsanx/interaction" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Assessing interation in epidemiological studies</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="results-from-regression" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">Chapter 14</span> Results from regression<a href="results-from-regression.html#results-from-regression" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<ul>
<li>Add interaction term in the regression</li>
<li>check the coef of the interaction terms, and compare that number with the numbers calculated at the previous section (rations and differences): they should be equivalent if not equal</li>
</ul>
<p>Using regression could help accommodate the following</p>
<ul>
<li>covariates could be added</li>
<li>exposure variable could be continuous covariate</li>
</ul>
<div id="or-multiplicative-scale" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> OR: multiplicative scale<a href="results-from-regression.html#or-multiplicative-scale" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="results-from-regression.html#cb102-1" aria-hidden="true" tabindex="-1"></a>OCdata<span class="sc">$</span>alc <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(OCdata<span class="sc">$</span>alc)</span>
<span id="cb102-2"><a href="results-from-regression.html#cb102-2" aria-hidden="true" tabindex="-1"></a>OCdata<span class="sc">$</span>smk <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(OCdata<span class="sc">$</span>smk)</span>
<span id="cb102-3"><a href="results-from-regression.html#cb102-3" aria-hidden="true" tabindex="-1"></a>reg1 <span class="ot">=</span> <span class="fu">glm</span>(oc<span class="sc">~</span>alc<span class="sc">*</span>smk, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>), <span class="at">data =</span> OCdata)</span>
<span id="cb102-4"><a href="results-from-regression.html#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(jtools)</span>
<span id="cb102-5"><a href="results-from-regression.html#cb102-5" aria-hidden="true" tabindex="-1"></a>reg.res1 <span class="ot">&lt;-</span> <span class="fu">summ</span>(reg1, <span class="at">exp =</span> <span class="cn">TRUE</span>)</span>
<span id="cb102-6"><a href="results-from-regression.html#cb102-6" aria-hidden="true" tabindex="-1"></a>reg.res1<span class="sc">$</span>coeftable</span></code></pre></div>
<pre><code>##             exp(Est.)       2.5%      97.5%      z val.           p
## (Intercept) 0.1500000 0.04457383  0.5047805 -3.06413033 0.002183038
## alc1        3.3333333 0.70060657 15.8592734  1.51286779 0.130313246
## smk1        2.9629630 0.68004588 12.9096430  1.44647020 0.148045366
## alc1:smk1   0.9149096 0.15436110  5.4227369 -0.09794692 0.921974441</code></pre>
<p>P-values are used to determine significance of the interaction term.</p>
<p>Let us estimate the ORs by effect modifier</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="results-from-regression.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(Publish)</span>
<span id="cb104-2"><a href="results-from-regression.html#cb104-2" aria-hidden="true" tabindex="-1"></a>saveres <span class="ot">&lt;-</span> <span class="fu">publish</span>(reg1)</span></code></pre></div>
<pre><code>##             Variable Units OddsRatio        CI.95   p-value 
##  alc(0): smk(1 vs 0)            2.96 [0.68;12.91]   0.14805 
##  alc(1): smk(1 vs 0)            2.71  [1.00;7.37]   0.05070 
##  smk(0): alc(1 vs 0)            3.33 [0.70;15.86]   0.13031 
##  smk(1): alc(1 vs 0)            3.05  [1.29;7.18]   0.01073</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="results-from-regression.html#cb106-1" aria-hidden="true" tabindex="-1"></a>saveres</span></code></pre></div>
<pre><code>##              Variable Units OddsRatio        CI.95   p-value
## 1 alc(0): smk(1 vs 0)            2.96 [0.68;12.91]   0.14805
## 2 alc(1): smk(1 vs 0)            2.71  [1.00;7.37]   0.05070
## 3 smk(0): alc(1 vs 0)            3.33 [0.70;15.86]   0.13031
## 4 smk(1): alc(1 vs 0)            3.05  [1.29;7.18]   0.01073</code></pre>
<p>We can also plot this to check the overlap of CIs visually</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="results-from-regression.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), saveres<span class="sc">$</span>rawTable[<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>,<span class="st">&quot;OddsRatio&quot;</span>], <span class="at">xlab=</span><span class="st">&quot;effect modifier&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;OR&quot;</span>, <span class="at">main=</span><span class="st">&quot;OR by effect modifier&quot;</span>, <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">ylim =</span> <span class="fu">range</span>(saveres<span class="sc">$</span>rawTable[<span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>]))</span>
<span id="cb108-2"><a href="results-from-regression.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), saveres<span class="sc">$</span>rawTable[<span class="dv">3</span>,<span class="fu">c</span>(<span class="st">&quot;Lower&quot;</span>,<span class="st">&quot;Upper&quot;</span>)], <span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lty=</span><span class="dv">2</span>)</span>
<span id="cb108-3"><a href="results-from-regression.html#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), saveres<span class="sc">$</span>rawTable[<span class="dv">4</span>,<span class="fu">c</span>(<span class="st">&quot;Lower&quot;</span>,<span class="st">&quot;Upper&quot;</span>)], <span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lty=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-48-1.png" width="672" /></p>
</div>
<div id="rd-additive-scale" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> RD: additive scale<a href="results-from-regression.html#rd-additive-scale" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="results-from-regression.html#cb109-1" aria-hidden="true" tabindex="-1"></a>reg2 <span class="ot">=</span> <span class="fu">glm</span>(oc<span class="sc">~</span>alc<span class="sc">*</span>smk, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;identity&#39;</span>), <span class="at">data =</span> OCdata)</span>
<span id="cb109-2"><a href="results-from-regression.html#cb109-2" aria-hidden="true" tabindex="-1"></a>reg.res2 <span class="ot">&lt;-</span> <span class="fu">summ</span>(reg2, <span class="at">exp =</span> <span class="cn">FALSE</span>, <span class="at">confint =</span> <span class="cn">TRUE</span>)</span>
<span id="cb109-3"><a href="results-from-regression.html#cb109-3" aria-hidden="true" tabindex="-1"></a>reg.res2<span class="sc">$</span>coeftable</span></code></pre></div>
<pre><code>##                   Est.         2.5%     97.5%    z val.          p
## (Intercept) 0.13043478 -0.007201192 0.2680708 1.8574176 0.06325177
## alc1        0.20289855 -0.054723418 0.4605205 1.5436333 0.12267719
## smk1        0.17725753 -0.047279102 0.4017942 1.5472681 0.12179861
## alc1:smk1   0.06485671 -0.251754034 0.3814675 0.4014924 0.68805761</code></pre>
<p>Convergence is often an issue, and hence the following can be used instead. But for the following, robust standard error estimation is necessary. One disadvantage is that the estimated probabilities could be beyond 0 and 1.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="results-from-regression.html#cb111-1" aria-hidden="true" tabindex="-1"></a>reg3 <span class="ot">=</span> <span class="fu">glm</span>(oc<span class="sc">~</span>alc<span class="sc">*</span>smk, <span class="at">family =</span> gaussian, <span class="at">data =</span> OCdata)</span>
<span id="cb111-2"><a href="results-from-regression.html#cb111-2" aria-hidden="true" tabindex="-1"></a>reg.res3 <span class="ot">&lt;-</span> <span class="fu">summ</span>(reg3, <span class="at">exp =</span> <span class="cn">FALSE</span>, <span class="at">robust =</span> <span class="cn">TRUE</span>, <span class="at">confint =</span> <span class="cn">TRUE</span>)</span>
<span id="cb111-3"><a href="results-from-regression.html#cb111-3" aria-hidden="true" tabindex="-1"></a>reg.res3<span class="sc">$</span>coeftable</span></code></pre></div>
<pre><code>##                   Est.        2.5%     97.5%   t val.         p
## (Intercept) 0.13043478 -0.06858971 0.3294593 1.284503 0.1989662
## alc1        0.20289855 -0.09747536 0.5032725 1.323929 0.1855265
## smk1        0.17725753 -0.09596588 0.4504809 1.271554 0.2035316
## alc1:smk1   0.06485671 -0.29234745 0.4220609 0.355866 0.7219409</code></pre>
</div>
<div id="rr-multiplicative-scale" class="section level2 hasAnchor" number="14.3">
<h2><span class="header-section-number">14.3</span> RR: multiplicative scale<a href="results-from-regression.html#rr-multiplicative-scale" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="results-from-regression.html#cb113-1" aria-hidden="true" tabindex="-1"></a>reg4 <span class="ot">=</span> <span class="fu">glm</span>(oc<span class="sc">~</span>alc<span class="sc">*</span>smk, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;log&#39;</span>), <span class="at">data =</span> OCdata)</span>
<span id="cb113-2"><a href="results-from-regression.html#cb113-2" aria-hidden="true" tabindex="-1"></a>reg.res4 <span class="ot">&lt;-</span> <span class="fu">summ</span>(reg4, <span class="at">exp =</span> <span class="cn">TRUE</span>, <span class="at">robust =</span> <span class="cn">TRUE</span>)</span>
<span id="cb113-3"><a href="results-from-regression.html#cb113-3" aria-hidden="true" tabindex="-1"></a>reg.res4<span class="sc">$</span>coeftable</span></code></pre></div>
<pre><code>##             exp(Est.)       2.5%     97.5%     z val.            p
## (Intercept) 0.1304348 0.04540698 0.3746832 -3.7833464 0.0001547338
## alc1        2.5555556 0.73873564 8.8405972  1.4817478 0.1384074033
## smk1        2.3589744 0.70876768 7.8513175  1.3988837 0.1618478632
## alc1:smk1   0.7318192 0.18575194 2.8831965 -0.4463088 0.6553742276</code></pre>
<p>or, alternatively, the following could be used.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="results-from-regression.html#cb115-1" aria-hidden="true" tabindex="-1"></a>reg5 <span class="ot">=</span> <span class="fu">glm</span>(oc<span class="sc">~</span>alc<span class="sc">*</span>smk, <span class="at">family =</span> <span class="fu">poisson</span>(<span class="at">link =</span> <span class="st">&#39;log&#39;</span>), <span class="at">data =</span> OCdata)</span>
<span id="cb115-2"><a href="results-from-regression.html#cb115-2" aria-hidden="true" tabindex="-1"></a>reg.res5 <span class="ot">&lt;-</span> <span class="fu">summ</span>(reg5, <span class="at">exp =</span> <span class="cn">TRUE</span>, <span class="at">robust =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-3"><a href="results-from-regression.html#cb115-3" aria-hidden="true" tabindex="-1"></a>reg.res5<span class="sc">$</span>coeftable</span></code></pre></div>
<pre><code>##             exp(Est.)       2.5%      97.5%     z val.           p
## (Intercept) 0.1304348 0.04207716  0.4043342 -3.5286609 0.000417668
## alc1        2.5555554 0.63925951 10.2162942  1.3270950 0.184477266
## smk1        2.3589742 0.62595502  8.8900305  1.2678745 0.204842758
## alc1:smk1   0.7318192 0.15458224  3.4645596 -0.3935815 0.693890056</code></pre>
<!---
## Prevalence estimation


```r
# library(devtools)
# install_github("Raydonal/prLogistic")
# require(prLogistic)
# OCdata$alc <- as.numeric(as.character(OCdata$alc))
# OCdata$smk <- as.numeric(as.character(OCdata$smk))
# OCdata$oc <- as.numeric(as.character(OCdata$oc))
# reg1x = glm(oc~alc*smk, family = binomial(link = 'logit'), data = OCdata)
#pr10 <- prLogisticBootCond(reg1, data = OCdata)
#pr10
# d1 <- subset(OCdata, smk == 1)
# d0 <- subset(OCdata, smk == 0)
# d1$alc <- as.numeric(as.character(d1$alc))
# d0$alc <- as.numeric(as.character(d0$alc))
# reg1s1 = glm(oc~alc, family = binomial(link = 'logit'), data = d1)
# reg1s0 = glm(oc~alc, family = binomial(link = 'logit'), data = d0)
#  prLogisticBootMarg(reg1s1, data = d1)
#  prLogisticBootMarg(reg1s0, data = d0)
```
--->
</div>
<div id="converted-estimates-from-or" class="section level2 hasAnchor" number="14.4">
<h2><span class="header-section-number">14.4</span> Converted estimates from OR<a href="results-from-regression.html#converted-estimates-from-or" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="results-from-regression.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(interactionR)</span>
<span id="cb117-2"><a href="results-from-regression.html#cb117-2" aria-hidden="true" tabindex="-1"></a>reg1 <span class="ot">=</span> <span class="fu">glm</span>(oc<span class="sc">~</span>alc<span class="sc">*</span>smk, <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&#39;logit&#39;</span>), <span class="at">data =</span> OCdata)</span>
<span id="cb117-3"><a href="results-from-regression.html#cb117-3" aria-hidden="true" tabindex="-1"></a>table_object <span class="ot">=</span> <span class="fu">interactionR</span>(reg1, <span class="at">exposure_names =</span> <span class="fu">c</span>(<span class="st">&quot;alc1&quot;</span>, <span class="st">&quot;smk1&quot;</span>), <span class="at">ci.type =</span> <span class="st">&quot;mover&quot;</span>, <span class="at">ci.level =</span> <span class="fl">0.95</span>, <span class="at">em=</span><span class="cn">FALSE</span>, <span class="at">recode =</span> <span class="cn">FALSE</span>)</span>
<span id="cb117-4"><a href="results-from-regression.html#cb117-4" aria-hidden="true" tabindex="-1"></a>table_object<span class="sc">$</span>dframe</span></code></pre></div>
<pre><code>##                        Measures Estimates       CI.ll      CI.ul           p
## 1                          OR00 1.0000000          NA         NA          NA
## 2                          OR01 2.9629630   0.6800459 12.9096430 0.148045366
## 3                          OR10 3.3333333   0.7006066 15.8592734 0.130313246
## 4                          OR11 9.0361446   2.6413389 30.9130753 0.000483904
## 5  OR(smk1 on outcome [alc1==0] 2.9629630   0.6800459 12.9096430 0.148045366
## 6  OR(smk1 on outcome [alc1==1] 2.7108434   0.9969750  7.3709689 0.050316637
## 7  OR(alc1 on outcome [smk1==0] 3.3333333   0.7006066 15.8592734 0.130313246
## 8  OR(alc1 on outcome [smk1==1] 3.0496988   1.2948765  7.1826638 0.010707090
## 9          Multiplicative scale 0.9149096   0.1543611  5.4227369 0.921974441
## 10                         RERI 3.7398483 -11.4297248 21.8721579          NA
## 11                           AP 0.4138765  -0.3775073  0.8113231          NA
## 12                           SI 1.8704819   0.6460433  5.4155854          NA</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="results-from-regression.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">interactionR_table</span>(table_object)</span></code></pre></div>
<pre><code>## Do you want to save a Microsoft Word copy of the em/interaction table to your working directory? (yes/No/cancel) 
## a flextable object.
## col_keys: `*`, `smk1 absent`, `smk1 present`, `Effect of smk1 within the strata of alc1` 
## header has 1 row(s) 
## body has 9 row(s) 
## original dataset sample: 
##                                          *       smk1 absent       smk1 present
## 1                                     &lt;NA&gt;              &lt;NA&gt;               &lt;NA&gt;
## 2                                     &lt;NA&gt;       OR [95% CI]        OR [95% CI]
## 3                              alc1 absent     1 [Reference] 2.96 [0.68, 12.91]
## 4                             alc1 present 3.33 [0.7, 15.86] 9.04 [2.64, 30.91]
## 5 Effect of alc1 within the strata of smk1 3.33 [0.7, 15.86]  3.05 [1.29, 7.18]
##   Effect of smk1 within the strata of alc1
## 1                                     &lt;NA&gt;
## 2                              OR [95% CI]
## 3                       2.96 [0.68, 12.91]
## 4                           2.71 [1, 7.37]
## 5                                     &lt;NA&gt;</code></pre>
<p>Compare with previously obtained results</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="results-from-regression.html#cb121-1" aria-hidden="true" tabindex="-1"></a>saveres</span></code></pre></div>
<pre><code>##              Variable Units OddsRatio        CI.95   p-value
## 1 alc(0): smk(1 vs 0)            2.96 [0.68;12.91]   0.14805
## 2 alc(1): smk(1 vs 0)            2.71  [1.00;7.37]   0.05070
## 3 smk(0): alc(1 vs 0)            3.33 [0.70;15.86]   0.13031
## 4 smk(1): alc(1 vs 0)            3.05  [1.29;7.18]   0.01073</code></pre>
<p>Also calculate by hand</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="results-from-regression.html#cb123-1" aria-hidden="true" tabindex="-1"></a>beta1 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(reg1<span class="sc">$</span>coefficients[<span class="dv">2</span>])</span>
<span id="cb123-2"><a href="results-from-regression.html#cb123-2" aria-hidden="true" tabindex="-1"></a>OR10 <span class="ot">&lt;-</span> <span class="fu">exp</span>(beta1)</span>
<span id="cb123-3"><a href="results-from-regression.html#cb123-3" aria-hidden="true" tabindex="-1"></a>OR10</span></code></pre></div>
<pre><code>## [1] 3.333333</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="results-from-regression.html#cb125-1" aria-hidden="true" tabindex="-1"></a>beta2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(reg1<span class="sc">$</span>coefficients[<span class="dv">3</span>])</span>
<span id="cb125-2"><a href="results-from-regression.html#cb125-2" aria-hidden="true" tabindex="-1"></a>OR01 <span class="ot">&lt;-</span> <span class="fu">exp</span>(beta2)</span>
<span id="cb125-3"><a href="results-from-regression.html#cb125-3" aria-hidden="true" tabindex="-1"></a>OR01</span></code></pre></div>
<pre><code>## [1] 2.962963</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="results-from-regression.html#cb127-1" aria-hidden="true" tabindex="-1"></a>beta3 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(reg1<span class="sc">$</span>coefficients[<span class="dv">4</span>])</span>
<span id="cb127-2"><a href="results-from-regression.html#cb127-2" aria-hidden="true" tabindex="-1"></a>OR11 <span class="ot">&lt;-</span> <span class="fu">exp</span>(beta1 <span class="sc">+</span> beta2 <span class="sc">+</span> beta3)</span>
<span id="cb127-3"><a href="results-from-regression.html#cb127-3" aria-hidden="true" tabindex="-1"></a>OR11</span></code></pre></div>
<pre><code>## [1] 9.036145</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="results-from-regression.html#cb129-1" aria-hidden="true" tabindex="-1"></a>RERI <span class="ot">&lt;-</span> OR11 <span class="sc">-</span> OR10 <span class="sc">-</span> OR01 <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb129-2"><a href="results-from-regression.html#cb129-2" aria-hidden="true" tabindex="-1"></a>RERI</span></code></pre></div>
<pre><code>## [1] 3.739848</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="results-from-regression.html#cb131-1" aria-hidden="true" tabindex="-1"></a>AP <span class="ot">&lt;-</span> RERI <span class="sc">/</span> OR11</span>
<span id="cb131-2"><a href="results-from-regression.html#cb131-2" aria-hidden="true" tabindex="-1"></a>AP</span></code></pre></div>
<pre><code>## [1] 0.4138765</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="results-from-regression.html#cb133-1" aria-hidden="true" tabindex="-1"></a>SI <span class="ot">&lt;-</span> (OR11 <span class="sc">-</span> <span class="dv">1</span>)<span class="sc">/</span> (OR10 <span class="sc">-</span> <span class="dv">1</span> <span class="sc">+</span> OR01 <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb133-2"><a href="results-from-regression.html#cb133-2" aria-hidden="true" tabindex="-1"></a>SI</span></code></pre></div>
<pre><code>## [1] 1.870482</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="results-from-regression.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;Additive interactions function.R&quot;</span>) <span class="co"># Mathur MB &amp; VanderWeele TJ (2018)</span></span>
<span id="cb135-2"><a href="results-from-regression.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">additive_interactions</span>(reg1)</span></code></pre></div>
<pre><code>## Loading required package: msm</code></pre>
<pre><code>##        Stat       Est       CI.lo     CI.hi    p.val.0 p.val.epi
## 1      RERI 3.7398483 -1.83667500 9.3163716 0.09435021 0.2704345
## 2        AP 0.4138765 -0.07306308 0.9008162 0.04786863        NA
## 3      alc1 0.2903548 -0.13508981 0.7157995 0.09050950        NA
## 4      smk1 0.2442668 -0.08791751 0.5764510 0.07475981        NA
## 5 alc1:smk1 0.4653784 -0.10296969 1.0337265 0.05426119        NA
##   p.val.suff.cause
## 1        0.1677822
## 2               NA
## 3               NA
## 4               NA
## 5               NA</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-stratified-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reference.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ehsanx/interaction/edit/BRANCH/02-effmod.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
